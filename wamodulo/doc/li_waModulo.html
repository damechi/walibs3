<html>
	<head>
		<meta content="text/html; charset=UTF-8" http-equiv="Content-Type">
		<title>waModulo 3.0</title>
		<link rel="stylesheet" type="text/css" href="media/style.css">
	</head>
	<body>

		<table border="0" cellspacing="0" cellpadding="0" height="48" width="100%">
			<tr>
				<td class="header_top">waModulo</td>
			</tr>
			<tr><td class="header_line"><img src="media/empty.png" width="1" height="1" border="0" alt=""  /></td></tr>
			<tr>
				<td class="header_menu">
					
																		
																						[ <a href="classtrees_waModulo.html" class="menu">albero delle classi</a> ]
						[ <a href="elementindex_waModulo.html" class="menu">indice degli elementi</a> ]
										<!-- [ <a href="elementindex.html" class="menu">all elements</a> ] -->
				</td>
			</tr>
			<tr><td class="header_line"><img src="media/empty.png" width="1" height="1" border="0" alt=""  /></td></tr>
		</table>

		<table width="100%" border="0" cellpadding="0" cellspacing="0">
			<tr valign="top">
				<td width="200" class="menu">
															<!-- <b>Packages:</b><br />-->
											<a href="li_waModulo.html">Introduzione</a><br />
										<br />
													
											<b><a href="waModulo/_wamodulo.inc.php.html">Defines applicative
</a><br>
<br /></b>
					
											<b>Classi:</b><br />
								    		<a href="waModulo/waAreaTesto.html">waAreaTesto</a><br />
	    		<a href="waModulo/waBottone.html">waBottone</a><br />
	    		<a href="waModulo/waCaptcha.html">waCaptcha</a><br />
	    		<a href="waModulo/waCaricaFile.html">waCaricaFile</a><br />
	    		<a href="waModulo/waCFPI.html">waCFPI</a><br />
	    		<a href="waModulo/waControllo.html">waControllo</a><br />
	    		<a href="waModulo/waCornice.html">waCornice</a><br />
	    		<a href="waModulo/waData.html">waData</a><br />
	    		<a href="waModulo/waDataOra.html">waDataOra</a><br />
	    		<a href="waModulo/waEmail.html">waEmail</a><br />
	    		<a href="waModulo/waEtichetta.html">waEtichetta</a><br />
	    		<a href="waModulo/waIntero.html">waIntero</a><br />
	    		<a href="waModulo/waLogico.html">waLogico</a><br />
	    		<a href="waModulo/waModulo.html">waModulo</a><br />
	    		<a href="waModulo/waMultiSelezione.html">waMultiSelezione</a><br />
	    		<a href="waModulo/waNonControllo.html">waNonControllo</a><br />
	    		<a href="waModulo/waOpzione.html">waOpzione</a><br />
	    		<a href="waModulo/waOra.html">waOra</a><br />
	    		<a href="waModulo/waPassword.html">waPassword</a><br />
	    		<a href="waModulo/waSelezione.html">waSelezione</a><br />
	    		<a href="waModulo/waTesto.html">waTesto</a><br />
	    		<a href="waModulo/waValuta.html">waValuta</a><br />
	
						<br />
					
											<b>Files:</b><br />
						<a href="waModulo/_areatesto.class.php.html">areatesto.class.php
</a><br>
<a href="waModulo/_bottone.class.php.html">bottone.class.php
</a><br>
<a href="waModulo/_captcha.class.php.html">captcha.class.php
</a><br>
<a href="waModulo/_caricafile.class.php.html">caricafile.class.php
</a><br>
<a href="waModulo/_cfpi.class.php.html">cfpi.class.php
</a><br>
<a href="waModulo/_controllo.class.php.html">controllo.class.php
</a><br>
<a href="waModulo/_cornice.class.php.html">cornice.class.php
</a><br>
<a href="waModulo/_data.class.php.html">data.class.php
</a><br>
<a href="waModulo/_dataora.class.php.html">dataora.class.php
</a><br>
<a href="waModulo/_email.class.php.html">email.class.php
</a><br>
<a href="waModulo/_etichetta.class.php.html">etichetta.class.php
</a><br>
<a href="waModulo/_intero.class.php.html">intero.class.php
</a><br>
<a href="waModulo/_logico.class.php.html">logico.class.php
</a><br>
<a href="waModulo/_modulo.class.php.html">modulo.class.php
</a><br>
<a href="waModulo/_multiselezione.class.php.html">multiselezione.class.php
</a><br>
<a href="waModulo/_noncontrollo.class.php.html">noncontrollo.class.php
</a><br>
<a href="waModulo/_opzione.class.php.html">opzione.class.php
</a><br>
<a href="waModulo/_ora.class.php.html">ora.class.php
</a><br>
<a href="waModulo/_password.class.php.html">password.class.php
</a><br>
<a href="waModulo/_wamodulo.inc.php.html">wamodulo.inc.php
</a><br>
<a href="waModulo/_selezione.class.php.html">selezione.class.php
</a><br>
<a href="waModulo/_testo.class.php.html">testo.class.php
</a><br>
<a href="waModulo/_valuta.class.php.html">valuta.class.php
</a><br>
<br />
						<br />
					
					
							</td>
			<td>
				<table cellpadding="10" cellspacing="0" width="100%" border="0"><tr><td valign="top">

												<!--NewPage-->
<HTML>
<HEAD>
	<meta content="text/html; charset=UTF-8" http-equiv="Content-Type">
	<TITLE>waModulo 3.0</TITLE>
<LINK REL ='stylesheet' TYPE='text/css' HREF='../media/layout.css' TITLE='Style'>
<LINK REL ='stylesheet' TYPE='text/css' HREF='../media/stylesheet.css' TITLE='Style'>
</HEAD>
<BODY>
<p>&nbsp;</p>
<div align="center">
<h1>waModulo 3.0</h1>
</div>
<p>&nbsp;</p>
<div align="justify">
Classe per la gestione di un modulo (form) standard, con prelevamento, opzionale, dei dati da 
un record waRecord contenuto in un oggetto waRigheDB e gestione dei dati in input
da parte del client. Il modulo è solo il contenitore 
che contiene i vari controlli definiti dalle specifiche classi.
<p>
Di per sè, la classe genera solamente un codice XML che viene dato in pasto ad una
UI (foglio di stile XSLT il quale può fare riferimento a risorse quali script
javascript e css) che trasforma l'XML come si ritiene opportuno.

Si tenga però in considerazione il fatto che la riscrittura completa dell'XSLT è
assai gravosa, soprattutto per ciò che riguarda le implicazioni delle procedure
di controllo javascript; a seconda delle esigenze, si consiglia pertanto di
partire dall'esistente e modificare solo le parti che devono essere modificate
(ad esempio eliminando tutti i riferimenti a javascript in caso di form usabili).

<p>
Nella sua configurazione di default, ossia utilizzando la UI fornito dal package
(<b>uis/wa_default</b>),
il package gestisce l'RPC (chiamata remota al server senza ricaricamento della pagina) e
effettua un controllo formale dei dati inseriti nei vari controlli instanziati
all'interno del modulo.
<p>
Come si usa il package? Sseguite questo esempio di codice PHP:

<pre class='src-code'>
&lt;?php

<span class='src-comm'>// includete il package waModulo</span>
include "wamodulo.inc.php";

<span class='src-comm'>// istanziate un oggetto di classe waModulo</span>
$modulo = new waModulo();

<span class='src-comm'>// create un oggetto di classe waRigheDB da associare
// al modulo</span>
$connessioneDB = wadb_dammiConnessione();
if ($connessioneDB->nrErrore())
	exit("Errore connessione DB: " . 
		$connessioneDB->nrErrore() . " - " . 
		$connessioneDB->messaggioErrore());
$modulo->righeDB = new waRigheDB($connessioneDB);

<span class='src-comm'>// caricate il record che vi interessa all'interno del modulo</span>
$sql = "SELECT * FROM Ordini WHERE IDOrdine=" . $connessioneDB->interoSql(95);
$modulo->righeDB->caricaDaSql($sql);
if ($modulo->righeDB->nrErrore())
	exit("Errore caricaDaSql: " . 
			$modulo->righeDB->nrErrore() . " - " . 
			$modulo->righeDB->messaggioErrore());

<span class='src-comm'>// definite le proprietà del vostro modulo</span>
$modulo->larghezza = 600;
$modulo->altezza = 100;
$modulo->nomeCampoRecId = $modulo->righeDB->chiavePrimaria();

<span class='src-comm'>// create i controlli che il vostro modulo dovrà contenere</span>
$etichetta = new waEtichetta($modulo , "NoteOrdine", "Note ordine");
$etichetta->alto = 20;
$etichetta->sinistra = 5;
$ctrl = new waTesto($modulo, "NoteOrdine");
$ctrl->alto = 20;
$ctrl->sinistra = 200;
$ctrl->larghezza = 300;

$OkCtrl = new waBottone($modulo, 'cmdInvia', "Invia");
$OkCtrl->alto = 50;
$OkCtrl->sinistra = 200;
$OkCtrl->larghezza = 100;

<span class='src-comm'>// chiamata al metodo che legge eventuali valori in input</span>
$modulo->leggiValoriIngresso();

<span class='src-comm'>// verifica se è stato richiesto dall'utente la cancellazione del record
// in editing</span>
if ($modulo->daEliminare())
	$modulo->elimina(true);

<span class='src-comm'>// verifica se è stato effettuato il submit da parte dell'utente, che 
// quindi desidera consolidare (inserire/modificare)i dati inputati nel 
// modulo</span>
elseif ($modulo->daAggiornare())
	{
	if ($modulo->verificaObbligo())
		$modulo->salva(true);
	}

<span class='src-comm'>// poichè non è stata effettuata alcuna azione di input da parte 
// dell'utente, produciamo l'output del modulo</span>
else
	$modulo->mostra();

?>
</pre>

<p>
Naturalmente potete personalizzare molto meglio il vostro modulo e renderlo molto
più complesso e adatto alle vostre esigenze. 
Per scoprire come vi invitiamo a scorrere le descrizioni delle diverse proprietà
che le classi vi mettono a disposizione.

<p style='margin-top: 40px'>

<h3 style='text-align: center'>Requisiti del protocollo di comunicazione client/server</h3>
La classe, o meglio l'oggetto istanziato della classe, risponde agli eventi 
generati dal client se vengono rispettati i seguenti requisiti:
<ul>
	<li>
		i dati devono essere sempre inviati mediante HTTP/POST
	</li>
	<li>
		tra i parametri POST deve essere sempre presente la variabile
		<b>wamodulo_nome_modulo</b> valorizzata con il nome attribuito al modulo
		in fase di costruzione (proprietà <a href="waModulo/waModulo.html#var$nome">waModulo::$nome</a>)
	</li>
	<li>
		qualora si voglia utilizzare il meccanismo standard previsto dalla classe per la scelta
		dell'azione di input da eseguire (aggiornamento record, eliminazione record, 
		abort dell'operazione), tra i parametri POST deve essere presente la variabile
		<b>wamodulo_operazione</b> valorizzata con una delle defines relative
		alle possibili operazioni del modulo (WAMODULO_OPE_xxx). 
		<p>
		E' ovviamente possibile non utilizzare questo meccanismo, oppure valorizzare
		il parametro con un valore personalizzato (ad esempio: "archivia"), ma
		in questo caso, ovviamente, sarà compito del programmatore gestire 
		correttamente l'operazione di input richiesta dal client.
		</p>
	</li>
</ul>

<p style='margin-top: 40px'>

<h3 style='text-align: center'>RPC mediante HTTP/POST</h3>

La classe è in grado di fornire un servizio di RPC; per innescare il meccanismo
è necessario inviare tramite HTTP/POST i seguenti parametri:
<ul>
	<li>
		<b>wamodulo_nome_modulo</b> questo parametro deve corrispondere alla proprietà
		<a href="waModulo/waModulo.html#var$nome">nome</a> dell'oggetto waModulo istanziato
	</li>
	<li>
		<b>wamodulo_operazione</b> valorizzato a <a href="waModulo/_wamodulo.inc.php.html#defineWAMODULO_OPE_RPC">WAMODULO_OPE_RPC</a>
	</li>
	<li>
		<b>wamodulo_funzione_rpc</b> nome della funzione PHP che si intende richiamare;
		il nome può anche essere un metodo dell'oggetto 
		<a href="waModulo/waModulo.html#var$applicazione">applicazione</a> se la proprietà è stata
		opportunamente valorizzata
	</li>
	<li>
		<b>wamodulo_dati_rpc</b> array dei parametri che si intendono passare
		alla funzione/metodo di cui al punto precedente; i parametri saranno 
		passati in ordine posizionale
	</li>
	
</ul>

Lato server dovrà essere invocato il metodo
<a href="waModulo/waModulo.html#methodleggiValoriIngresso">leggiValoriIngresso</a>
affinchè la classe possa accorgersi che le è giunto un input da gestire.
</p>
<p>
Il risultato della funzione/metodo PHP può essere di un qualunque tipo
semplice oppure un array. Al client sarà inviato in risposta un flusso XML così
definito:
<ul>
	<li>
		<b>wamodulo_esito_rpc</b> può valere <a href="waModulo/_wamodulo.inc.php.html#defineWAMODULO_RPC_OK">WAMODULO_RPC_OK</a> oppure
		<a href="waModulo/_wamodulo.inc.php.html#defineWAMODULO_RPC_KO">WAMODULO_RPC_KO</a>
	</li>
	<li>
		<b>wamodulo_messaggio_rpc</b> eventuale messaggio di errore
	</li>
	<li>
		<b>wamodulo_dati_rpc</b> dati in risposta (valore ritornato dalla
		funzione/metodo). In caso di array ogni elemento sarà contenuto in un
		elemento XML di nome <b>item</b>
	</li>
</ul>


		
<p>
<hr>
Buon lavoro,
<p>
Bicio, Boka.

</div>
</BODY>
</HTML>
        <div class="credit">
		    <hr />
		    Documentation generated on Fri, 05 Jul 2013 14:27:33 +0200 by <a href="http://www.phpdoc.org">phpDocumentor 1.4.4</a>
	      </div>
      </td></tr></table>
    </td>
  </tr>
</table>

</body>
</html>